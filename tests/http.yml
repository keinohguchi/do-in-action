---
- name: HTTP connection between two droplets
  hosts: client
  gather_facts: false
  tasks:
    - name: check the HTTP reachability (IPv4)
      uri:
        url: "http://{{ server.ipv4 }}:{{ server.port }}"
      register: result

    - name: print out the result
      debug: var=result

    - name: check the HTTP reachability (private IPv4)
      uri:
        url: "http://{{ server.ipv4_private }}:{{ server.port }}"
      register: result

    - name: print out the result
      debug: var=result

    - name: check the HTTP reachability (IPv6)
      uri:
        url: "http://[{{ server.ipv6 }}]:{{ server.port }}"
      register: result

    - name: print out the result
      debug: var=result

    - name: check the HTTP reachability (Floating IP)
      uri:
        url: "http://{{ server.flip }}:{{ server.port }}"
      register: result

    - name: print out the result
      debug: var=result
